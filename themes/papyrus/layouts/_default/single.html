{{ define "main" }}
<div class="grid grid-cols-12 gap-8 relative">
  <!-- Hero Title Section (Spans full width initially) -->
  <div class="col-span-12 mb-8 sm:mb-12 md:mb-16 pt-4 sm:pt-6 md:pt-8">
    <h1
      id="main-title"
      class="text-3xl sm:text-4xl md:text-5xl lg:text-7xl xl:text-8xl font-sans font-semibold tracking-tighter leading-[0.9] text-gray-100 mb-4 sm:mb-6 md:mb-8"
    >
      {{ .Title }}
    </h1>
  </div>

  <!-- TOC Sidebar (Sticky Left) -->
  <aside
    class="col-span-12 md:col-span-3 border-t border-gray-800 md:border-none pt-4 md:pt-0 mb-8 md:mb-0"
  >
    <div
      class="md:sticky top-20 space-y-6 md:space-y-8 font-mono text-xs sm:text-sm uppercase tracking-wider"
    >
      <!-- Sticky Title (Hidden by default, shown via JS) -->
      <div
        id="sidebar-title"
        class="opacity-0 transition-opacity duration-300 pointer-events-none pb-8 border-b border-gray-700 hidden md:block bg-white/5 p-4 -mx-2 rounded"
      >
        <div class="text-white mb-3 text-xs font-semibold">/ CURRENT</div>
        <div
          class="font-mono text-base font-bold tracking-tight normal-case leading-tight text-gray-100"
        >
          {{ .Title }}
        </div>
      </div>

      <!-- Table of Contents -->
      <div class="pb-8 border-b border-gray-700 hidden md:block">
        <div class="text-white mb-4 text-xs font-semibold">/ CONTENTS</div>
        <nav
          id="TableOfContents"
          class="font-mono normal-case text-base text-white hover:text-gray-100 transition-colors leading-relaxed"
        >
          {{ .TableOfContents }}
        </nav>
      </div>
    </div>
  </aside>

  <!-- Article Content -->
  <article
    class="col-span-12 md:col-span-6 border-t border-gray-800 pt-6 md:pt-8 prose prose-sm sm:prose-base md:prose-lg prose-headings:font-sans prose-headings:tracking-tight prose-p:font-sans prose-p:text-gray-200 max-w-none"
  >
    <div
      class="font-mono text-xs uppercase text-gray-400 mb-8 tracking-wider font-semibold"
    >
      / ARTICLE
    </div>
    {{ .Content }}
  </article>

  <!-- Metadata Sidebar (Sticky Right) -->
  <aside
    class="col-span-12 md:col-span-3 border-t border-gray-800 md:border-none pt-4 md:pt-0"
  >
    <div
      class="md:sticky top-20 space-y-6 md:space-y-8 font-mono text-xs sm:text-sm uppercase tracking-wider"
    >
      <div>
        <div class="text-gray-400 mb-4 text-xs font-semibold">/ METADATA</div>
      </div>

      <div class="grid grid-cols-2 md:block gap-y-4">
        <div class="border-b border-gray-700 pb-3 mb-5">
          <span class="text-gray-500 block mb-2 text-xs">DATE:</span>
          <span class="text-gray-100 font-semibold text-base"
            >{{ .Date.Format "2006.01.02" }}</span
          >
        </div>

        <div class="border-b border-gray-700 pb-3 mb-5">
          <span class="text-gray-500 block mb-2 text-xs">AUTHOR:</span>
          <span
            class="bg-gray-800 text-gray-100 px-2 py-1 rounded text-sm font-medium"
            >{{ .Params.author | default "Hundera" }}</span
          >
        </div>

        <div class="border-b border-gray-700 pb-3 mb-5">
          <span class="text-gray-500 block mb-2 text-xs">READING TIME:</span>
          <span class="text-gray-100 font-semibold text-base"
            >{{ .ReadingTime }} MIN READ</span
          >
        </div>

        <div class="border-b border-gray-700 pb-3 mb-5">
          <span class="text-gray-500 block mb-2 text-xs">TOPICS:</span>
          <div class="flex flex-wrap gap-2">
            {{ range .Params.tags }}
            <span
              class="bg-gray-800 text-gray-100 px-2 py-1 rounded text-xs font-medium uppercase"
              >{{ . }}</span
            >
            {{ else }}
            <span
              class="bg-gray-800 text-gray-100 px-2 py-1 rounded text-xs font-medium"
              >GENERAL</span
            >
            {{ end }}
          </div>
        </div>
      </div>

      <div class="pt-4">
        <div class="text-gray-400 mb-4 text-xs font-semibold">/ SHARE</div>
        <div class="flex flex-col gap-2">
          <button
            class="border border-gray-600 rounded-sm px-3 py-2 hover:bg-gray-100 hover:text-black transition-colors w-full text-center text-xs font-medium text-gray-300"
          >
            TWITTER/X
          </button>
          <button
            class="border border-gray-600 rounded-sm px-3 py-2 hover:bg-gray-100 hover:text-black transition-colors w-full text-center text-xs font-medium text-gray-300"
          >
            LINKEDIN
          </button>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- Footer Navigation (Next/Prev) -->
<div
  class="mt-12 sm:mt-16 md:mt-20 border-t border-gray-800 pt-6 md:pt-8 grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 font-mono text-xs uppercase"
>
  {{ with .PrevInSection }}
  <a href="{{ .RelPermalink }}" class="block group">
    <span class="text-gray-500 block mb-2 font-semibold">PREVIOUS</span>
    <span
      class="text-lg text-gray-100 group-hover:underline group-hover:text-gray-300 transition-colors"
      >{{ .Title }}</span
    >
  </a>
  {{ end }} {{ with .NextInSection }}
  <a href="{{ .RelPermalink }}" class="block text-right group">
    <span class="text-gray-500 block mb-2 font-semibold">NEXT</span>
    <span
      class="text-lg text-gray-100 group-hover:underline group-hover:text-gray-300 transition-colors"
      >{{ .Title }}</span
    >
  </a>
  {{ end }}
</div>
{{ end }}
